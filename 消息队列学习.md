## 消息队列（MQ）
记录学习消息队列的的笔记，基本资料来源于https://github.com/doocs/advanced-java ，推荐阅读

### 消息队列的用处
1.消息队列主要的应用场景是解耦，异步和削峰：
解耦：当一个系统的需要调用多个系统去发送业务数据时，耦合性太强，导致新增其他系统或删除其他系统接口调用时需要修改代码，而且还需要考虑在调用过程中系统宕机之后数据应该如何处理等，这样考虑的方面就太多了，如果使用MQ，直接将数据发送到MQ，其他系统自己去消费数据，其他系统新增或取消数据调用就很方便，而且数据的维护就放在了其他系统中，减小了主系统的复杂程度。

异步：一个系统的业务逻辑需要调用其他多个系统，调用链太长，导致响应返回时间过长，体验太差，使用MQ把调用数据发送到MQ，其他系统自己去消费相关消息，主系统响应速度大大提升。

削峰：主要是在短时间的对高并发进行限制，防止系统崩溃，MQ设置最大并发量，高并发时保证多余的请求堆积在MQ中，在后面的时间再去慢慢消费，确保系统不会崩溃。

2.消息队列的优缺点：
优点：解耦，异步和削峰

缺点：
1.系统可用性降低：引入MQ导致系统增加外部依赖，宕机的可能性增加，同时需要保证MQ的高可用才能保证系统的正常运行

2.系统的复杂性提高：引入MQ需要考虑额外的问题，消息的重复消费，消费顺序，消息丢失等

3.一致性问题：多个系统消费MQ消息，但是其中一个或多个系统消费失败，导致数据出现不一致的情况。

所以，引入MQ会使系统的复杂度提升，需要考虑清楚之后再接入。